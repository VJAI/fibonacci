@use 'sass:math';
@use 'variables' as fibVars;
@use 'functions' as fibFuncs;
@use 'mixins' as fibMixins;

// Makes the page take full viewport height.
html, body {
  min-height: 100vh;
}

// Site Body.
.cmp__blog {
  transition: filter fibVars.$fast-speed;
  background: url('#{fibVars.$assets-path}/background2.png') fibVars.$brand-bg;

  &.cmp__site-loading {
    filter: blur(fibVars.$blur);
  }
}

// Site Main Container.
.cmp__site-container {
  @include fibMixins.flex_init($column: true);
  flex: 1 1 auto;
  min-height: 100vh;
}

// Page Header.
.cmp__blog-header {
  @include fibMixins.flex_init($ver: true);

  height: fibVars.$header-height;
  padding: 0 fibVars.$md-size;

  color: fibVars.$header-color;
}

// Blog Info.
.cmp__blog-info {
  @include fibMixins.flex_init($column: true, $hor: true);

  // Separator.
  .cmp__separator {
    display: none;
    margin: 0 fibVars.$sm-size;
    height: fibFuncs.font_size(5);
    border-right: solid 1px;
  }
}

// Logo Component.
a.cmp__blog-logo {
  @include fibMixins.flex_init($ver: true);
  border-bottom: none;
  color: fibVars.$header-color;

  &:hover {
    .cmp__blog-name {
      letter-spacing: fibVars.$extra-large-letter-spacing;
    }
  }

  // Logo Name.
  .cmp__blog-name {
    position: relative;
    width: fibVars.$logo-name-width;
    margin-left: fibFuncs.font_size(-14);
    top: -5px;

    font: {
      family: fibVars.$logo-font-family;
      size: fibVars.$logo-font-size;
    }
    line-height: fibVars.$xs-line-height;
    letter-spacing: fibVars.$large-letter-spacing;

    transition: all fibVars.$medium-speed;
  }
}

// Tag Line.
.cmp__blog-tag-line {
  position: absolute;
  top: fibFuncs.font_size(6);
  left: fibFuncs.font_size(13);
  font-size: fibFuncs.font_size(-5);
}

// Page Navigation Component.
.cmp__blog-nav {
  @include fibMixins.flex_init($ver: true, $justify: flex-end);
  flex-grow: 1;
  height: 100%;
  margin-left: var(--lg-size);

  font-family: fibVars.$nav-font-family;

  // Nav List.
  ul {
    height: 100%;
    @include fibMixins.flex_init($ver: true);
    @include fibMixins.no_spacing;

    list-style: none;

    // Nav List Item.
    li {
      height: 100%;
      position: relative;

      &:before {
        display: none;
      }

      &:last-child {
        margin-right: 0;
      }

      // Active State.
      &.cmp__nav-active {
        a::before {
          content: '';

          position: absolute;
          z-index: -1;
          top: 0;
          left: 0;
          width: 100%;

          border-top: solid fibVars.$nav-active-border-width fibVars.$header-color;
        }
      }

      &:not(.cmp__hamburger-link) {
        display: none;
      }

      &.cmp__hamburger-link {
        padding: 0;

        .cmp__nav-link {
          position: relative;

          .cmp__hidden-menu {
            position: absolute;
            cursor: pointer;
            width: fibVars.$lg-size;
            height: fibVars.$lg-size;
            opacity: 0;
          }
        }
      }

      // Nav Link.
      a {
        position: relative;
        z-index: 1;
        @include fibMixins.flex_init($ver: true);
        height: 100%;
        padding: 0 fibVars.$nav-link-spacing;

        font-size: fibVars.$nav-font-size;
        line-height: fibVars.$xs-line-height;
        letter-spacing: fibVars.$large-letter-spacing;

        border-bottom: none;
        transition: all fibVars.$medium-speed;

        &:hover {
          background-color: darken(fibVars.$brand-bg, 5%);
          color: fibVars.$dim-gray;
        }

        cmp-icon {
          margin-right: fibVars.$nav-link-icon-spacing;
        }

        .cmp__nav-link-text {
          display: none;
          line-height: fibVars.$xs-line-height;
        }
      }

      // Search form.
      .cmp__search-form {
        @include fibMixins.flex_init($ver: true);
        height: 100%;

        input {
          display: none;
          padding: 0 0 fibFuncs.font_size(-14);

          font-size: fibVars.$small-font-size;
          line-height: fibVars.$xs-line-height;

          border: none;
          border-radius: 0;
          border-bottom: solid 1px fibVars.$header-color;
          color: fibVars.$header-color;
          background: transparent;

          &:focus, &:active {
            outline: none;
            border-color: fibVars.$header-color;
          }

          &::placeholder {
            color: fibVars.$header-color;
          }
        }
      }
    }
  }

  // When the search is active show the search textbox.
  &.cmp__search-active {
    .cmp__search-link {
      display: flex;

      .cmp__search-form {
        input {
          display: block;
        }
      }
    }

    ul li:not(:first-child) {
      display: none;
    }

    ul li:first-child {
      width: 100%;
    }
  }
}

// Page Main Content Container.
.cmp__blog-main {
  $outside-shadow-dark: darken(fibVars.$brand-bg, 15%);
  $inner-shadow-width: 6px;
  $inner-shadow-adjustment: 8px;
  $grad-color-0: rgba(204, 204, 204, 0.4);
  $grad-color-1: transparent;

  --border-radius: #{fibFuncs.font_size(5)};

  position: relative;
  flex: 1 1 auto;
  min-height: fibVars.$app-main-min-height; // Added after introducing spiral!
  padding: {
    top: fibVars.$page-content-top;
    bottom: fibVars.$page-content-bottom;
  };

  background: url('#{fibVars.$assets-path}/background.png'),
    url('#{fibVars.$assets-path}/svgbg.svg') no-repeat left top, fibVars.$white;

  background-size: auto, 50%;

  border-radius: var(--border-radius);
  box-shadow: $outside-shadow-dark -20px -5px 10px,
              $outside-shadow-dark 5px -5px 10px,
              $outside-shadow-dark -20px 0 100px -20px,
              rgba(50, 50, 93, 0.25) 0px 50px 100px -20px,
              rgba(0, 0, 0, 0.3) 0px 30px 60px -30px;

  &:before, &:after {
    content: '';
    position: absolute;
    width: $inner-shadow-width;
    top: calc(var(--border-radius) - #{$inner-shadow-adjustment});
    height: calc(100% - 2 * var(--border-radius) + #{$inner-shadow-adjustment * 2});
  }

  &:before {
    left: 0;
    background: linear-gradient(to right, $grad-color-0, $grad-color-1);
  }

  &:after {
    right: 0;
    background: linear-gradient(to left, $grad-color-0, $grad-color-1);
  }
}

// Spiral.
.cmp__spiral {
  $spiral-width: 60px;
  $spiral-offset: 27px;

  display: none;
  height: calc(100% - 2 * #{fibFuncs.font_size(16)});
  width: $spiral-width;
  position: absolute;
  top: fibFuncs.font_size(16);
  left: -1 * $spiral-offset;
  background-image: url("#{fibVars.$assets-path}/spiral.png");
  background-size: $spiral-width auto;
  background-repeat: repeat-y;
  z-index: 100;
}

// Color bars.
.cmp__color-bars {
  --bar-height: #{fibFuncs.font_size(-2)};
  --bar-width: #{fibFuncs.font_size(-10)};

  display: flex;
  position: absolute;
  top: 0;
  left: fibVars.$lg-size;
  height: var(--bar-height);

  .cmp__color-bar {
    width: var(--bar-width);
    height: 100%;
    position: relative;
    margin-right: 1px;
    background-color: fibVars.$light-gray;

    &:after {
      position: absolute;
      content: '';
      bottom: calc(-1 * var(--bar-width) - 1px);
      left: 0;
      width: var(--bar-width);
      height: var(--bar-width);
      background-color: inherit;
      transform: rotate(45deg);
    }
  }
}

// RSS subscription.
a.cmp__subscribe {
  --ribbon-offset: 4px;
  position: absolute;
  right: calc(#{fibFuncs.font_size(-4)} + #{fibVars.$md-size} - 4px);
  top: calc(-1 * var(--ribbon-offset));
  padding: 0 0 fibVars.$md-size 0;
  width: fibVars.$xl-size;

  border-bottom: none;

  z-index: 10;

  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: calc(-1 * var(--ribbon-offset));
    height: calc(var(--ribbon-offset) / 2);
    border: solid calc(var(--ribbon-offset) / 2) fibVars.$gray;
    border-left-color: transparent;
    border-top-color: transparent;
  }

  div {
    display: block;
    padding: fibFuncs.font_size(-14) 0;
    line-height: 0.8;
    text-align: center;

    background-image: url('#{fibVars.$assets-path}/background.png'), linear-gradient(darken(fibVars.$rss-ribbon-bg, 7%) 0%, fibVars.$rss-ribbon-bg 100%);

    span {
      font-size: fibVars.$sm-size;
      background-color: fibVars.$rss-ribbon-color;
      @include fibMixins.inset_text_shadow();
    }
  }

  span:after {
    content: '';
    width: 0;
    height: 0;
    position: absolute;
    bottom: 0;
    left: 0;
    border-left: calc(#{fibVars.$xl-size} / 2) solid fibVars.$rss-ribbon-bg;
    border-right: calc(#{fibVars.$xl-size} / 2) solid fibVars.$rss-ribbon-bg;
    border-bottom: fibVars.$md-size solid transparent;
  }
}

// Go top.
a.cmp__go-top {
  --border-width: #{fibFuncs.font_size(0)};
  --border-color: #{fibVars.$light-gray};

  position: absolute;
  bottom: 0;
  left: calc(50% - var(--border-width));
  border: solid var(--border-width) var(--border-color);
  border-left-color: transparent;
  border-right-color: transparent;
  border-top: none;
}

// Ribbon.
.cmp__ribbon {
  --ribbon-height: #{fibVars.$ribbon-small-screen-height};
  --ribbon-bend-height: calc(var(--ribbon-height) / 3.75);
  display: inline-block;
  position: relative;
  height: var(--ribbon-height);
  line-height: var(--ribbon-height);
  padding: 0 fibVars.$xl-size;

  @include fibMixins.set_heading_font($font_size: fibFuncs.font_size(-4));
  text-align: center;

  background: fibVars.$ribbon-bg;
  color: fibVars.$ribbon-color;
  box-shadow: fibVars.$ribbon-shadow;

  &::before, &::after {
    content: "";
    position: absolute;
    border: solid calc(var(--ribbon-height) / 2) darken(fibVars.$ribbon-bg, 10%);
    z-index: -1;
    bottom: calc(-1 * var(--ribbon-bend-height));
  }

  &::before {
    left: calc(-1 * calc(var(--ribbon-height) - var(--ribbon-bend-height)));
    border-left-color: transparent;
  }

  &::after {
    right: calc(-1 * calc(var(--ribbon-height) - var(--ribbon-bend-height)));
    border-right-color: transparent;
  }

  .cmp__ribbon-content {
    text-shadow: 0 0 2px darken(fibVars.$ribbon-bg, 25%);

    &::before, &::after {
      content: "";
      position: absolute;
      display: block;
      bottom: calc(-1 * var(--ribbon-bend-height));
      border: {
        style: solid;
        color: darken(fibVars.$ribbon-bg, 25%) transparent transparent transparent;
      }
    }

    &::before {
      left: 0;
      border-width: var(--ribbon-bend-height) 0 0 var(--ribbon-bend-height);
    }

    &::after {
      right: 0;
      border-width: var(--ribbon-bend-height) var(--ribbon-bend-height) 0 0;
    }
  }
}

// Page custom heading.
.cmp__section-heading {
  $border-color: darken(fibVars.$dim-gray, 10%);

  position: relative;
  @include fibMixins.flex_init($center: true);
  margin: {
    top: fibVars.$xxl-size;
    bottom: fibVars.$xl-size;
  };

  color: fibVars.$gray;

  span {
    @include fibMixins.flex_init($center: true);
    position: relative;
    height: fibVars.$widget-ribbon-height;
    line-height: fibVars.$widget-ribbon-height;
    @include fibMixins.set_heading_font();
    font-weight: bold;

    background-color: fibVars.$widget-ribbon-bg;
    color: fibVars.$widget-ribbon-color;
    z-index: 1;

    &::before, &::after {
      content: '';
      position: absolute;
      top: 0;
      height: 100%;

      border: calc(#{fibVars.$xl-size} / 2) solid fibVars.$widget-ribbon-bg;
      border-top-color: transparent;
      border-bottom-color: transparent;
    }

    &::before {
      left: calc(-1 * #{fibVars.$xl-size});
      border-left-color: transparent;
    }

    &::after {
      right: calc(-1 * #{fibVars.$xl-size});
      border-right-color: transparent;
    }
  }

  &:after {
    position: absolute;
    left: 0;
    top: 50%;
    content: '';
    width: 100%;
    border-bottom: solid 1px $border-color;
  }
}

// Page Content.
.cmp__blog-content {
  margin-bottom: fibVars.$xl-size;
}

// Article Meta Info.
.cmp__article-meta {
  position: relative;
  @include fibMixins.flex_init($column: true, $wrap: true);

  font: {
    size: fibVars.$article-meta-font-size;
    family: fibVars.$article-meta-font-family;
  }

  color: fibVars.$article-meta-color;

  ul, li {
    @include fibMixins.no_spacing;
    list-style: none;
    display: inline;
  }

  a {
    border-bottom: none;
  }

  > * {
    @include fibMixins.flex_init($ver: true);
    margin-bottom: 5px;
    margin-right: 0;

    cmp-icon {
      margin-right: fibFuncs.font_size(-14);
    }
  }
}

// Page title.
.cmp__page-title {
  margin: {
    top: fibVars.$xl-size;
    bottom: fibFuncs.font_size(17);
  };

  h1, h2, h3, h4, h5, h6 {
    margin: {
      top: 0;
      bottom: 0;
    };
  }

  h1 {
    position: relative;

    font-size: fibVars.$xxl-size;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    word-spacing: fibFuncs.font_size(-10);

    color: fibVars.$brand-gray;

    &::after {
      display: block;
      content: '';
      width: fibVars.$h1-border-width;
      height: 5px;
      margin-top: fibVars.$xl-size;
      background-color: fibVars.$brand-gray;
    }

    &:hover::before {
      left: calc(#{fibVars.$h1-border-width} + 10px);
    }
  }

  h4 {
    display: inline;
    padding-bottom: fibVars.$xs-size;

    text-transform: uppercase;
    letter-spacing: fibVars.$medium-letter-spacing;

    color: fibVars.$brand-gray;
  }
}

// Author Info.
.cmp__article-author {
  a {
    @include fibMixins.flex_init($ver: true, $align: flex-end);

    // Author Photo.
    .cmp__article-author-pic {
      border-radius: 50%;
      opacity: fibVars.$article-author-pic-opacity;
      width: fibVars.$author-pic-default-width;
    }

    span {
      margin-left: fibFuncs.font_size(-14);

      &.cmp__article-author-role {
        position: relative;
        top: -3px;
        margin-top: 0;
        padding: 1px 5px;

        font-size: fibVars.$article-author-role-font-size;
        text-transform: uppercase;
        letter-spacing: fibVars.$medium-letter-spacing;

        color: fibVars.$white;
        background-color: fibVars.$article-author-admin-badge-color;
        border-radius: fibVars.$border-radius;

        &.cmp__article-author-guest {
          background-color: fibVars.$article-author-guest-badge-color;
        }
      }
    }
  }
}

// Posted Date.
.cmp__article-date {
  span {
    font-variant: small-caps;
  }
}

// Total comments.
.cmp__article-total-comments {
  a {
    @include fibMixins.flex_init($ver: true);
  }
}

// Share controls.
.cmp__article-share {
  > div {
    @include fibMixins.flex_init($ver: true);
  }
}

// Tags.
.cmp__article-tags {
  font-style: italic;

  li {
    margin-right: fibFuncs.font_size(-22);

    &:before {
      display: none;
    }
  }
}

// Article Content.
.cmp__article-content {

  // Links.
  a:link,
  a:visited,
  a:hover,
  a:focus,
  a:active {
    border-bottom: none;
    text-decoration: none;
    transition: all fibVars.$medium-speed;
  }

  a:link {
    color: fibVars.$link-color;
  }

  a:visited,
  a:hover,
  a:focus,
  a:active {
    color: fibVars.$link-hover-color;
  }

  // Figure element.
  figure {
    // Full width.
    &.cmp__figure-full {
      max-width: 100%;
      @include fibMixins.horizontal-center();

      figcaption, caption {
        @include fibMixins.set_hor_margin(fibVars.$lg-size);
      }

      img, .cmp__table-wrapper, cmp-image, iframe {
        border-radius: 0;
      }
    }
  }

  // Table of contents.
  .cmp__toc {
    color: fibVars.$gray;

    ol li a {
      color: inherit;
      transition: color fibVars.$medium-speed;

      &:hover {
        color: fibVars.$brand-color;
      }
    }
  }

  // Lead Para styles.
  > p:first-of-type {
    font-size: fibVars.$lead-para-font-size;
    margin-top: fibVars.$md-size;
  }

  // Article Main Poster Image.
  .cmp__article-poster {
    @include fibMixins.set_hor_margin(0);
    margin-top: fibFuncs.font_size(-14);
  }

  // Article element.
  .cmp__page-element {
    margin: {
      top: fibVars.$md-size;
      bottom: fibVars.$lg-size;
    };
  }
}

// Article Footer.
.cmp__article-footer {
  @include fibMixins.flex_init($justify: flex-end);
}

// Contine reading link.
a.cmp__article-continue-reading {
  @include fibMixins.flex_init($inline: true, $ver: true);
  text-align: right;

  font: {
    family: fibVars.$continue-reading-font-family;
    size: fibVars.$continue-reading-font-size;
  }
  letter-spacing: fibVars.$medium-letter-spacing;
  text-transform: uppercase;

  color: fibVars.$continue-reading-color;

  &:after {
    position: relative;
    content: '→';
    margin-left: fibFuncs.font_size(-20);
  }

  &:hover {
    color: fibVars.$brand-color;
  }

  &:hover:after {
    animation: arrow-move-right fibVars.$medium-speed linear infinite;
  }
}

// Table of contents.
.cmp__toc {
  padding: fibVars.$medium-padding;
  margin-bottom: fibVars.$xl-size;

  @include fibMixins.config_container(fibVars.$dim-gray);

  h5 {
    padding-bottom: fibVars.$xs-size;
    margin-bottom: fibVars.$sm-size;
    text-align: center;

    letter-spacing: fibVars.$small-letter-spacing;
    text-transform: uppercase;

    color: fibVars.$brand-color;
    border-bottom: solid 1px fibVars.$light-gray;
  }

  ol {
    padding-left: fibVars.$md-size;

    font-size: fibVars.$sm-size;
    letter-spacing: fibVars.$medium-letter-spacing;
    text-transform: uppercase;

    a {
      color: fibVars.$gray;

      &:hover {
        color: fibVars.$brand-color;
      }
    }

    ol {
      font-size: fibVars.$xs-size;
    }
  }
}

// Ribbon.
.cmp__ribbon-container {
  @include fibMixins.flex_init($center: true);
  position: relative;
  z-index: 1;
  margin: {
    top: 1rem;
    bottom: fibFuncs.font_size(10);
  };
}

// Share Button
button.cmp__share-it-btn {
  padding: fibFuncs.font_size(-20);
  margin-left: fibFuncs.font_size(-12);
  font-size: fibFuncs.font_size(-5);
  background: none;
  color: fibVars.$article-meta-color;

  &:focus, &:active, &:hover {
    background-color: transparent;
    color: fibVars.$brand-color;
  }
}

// In small screens, make the content fluid and fixed in large.
.cmp__auto-layout {
  > * {
    @include fibMixins.set_hor_margin(fibVars.$lg-size);
  }

  .cmp__sub {
    .cmp__responsive {
      @include fibMixins.set_hor_margin(0);
    }

    figure {
      figcaption, caption {
        @include fibMixins.set_hor_margin(0);
      }
    }
  }
}

// In small screens blockquote, cmp__responsive applied elements should not have
// either border radius or shadow.
blockquote {
  &.cmp__responsive {
    @include fibMixins.no_shadow_radius;
  }
}

.cmp__responsive {
  max-width: 100%;
  @include fibMixins.set_hor_margin(0);

  &.cmp__toc,
  &.cmp__widget,
  &.cmp__sub {
    @include fibMixins.no_shadow_radius;
  }

  figcaption, caption {
    @include fibMixins.set_hor_margin(fibVars.$lg-size);
  }

  img, .cmp__table-wrapper, pre, .cmp__widget {
    @include fibMixins.no_shadow_radius;
  }
}

// Makes the first big and stand out.
.cmp__drop-cap:first-letter {
  float: left;

  padding: fibFuncs.font_size(-7);
  margin: {
    top: fibFuncs.font_size(-10);
    right: fibFuncs.font_size(-10);
  };

  font: {
    size: fibVars.$drop-cap-font-size;
    weight: bold;
  }
  line-height: fibVars.$xs-line-height;

  background-color: fibVars.$drop-cap-bg-color;
  color: fibVars.$drop-cap-color;
  border-radius: fibVars.$border-radius;
  box-shadow: -1px -1px 10px fibVars.$brand-dark inset;
}

// Page navigation.
.cmp__pagination {
  @include fibMixins.flex_init($ver: true);
  margin-top: fibVars.$lg-size;
  @include fibMixins.set_heading_font();
  color: fibVars.$gray;

  > * {
    flex-grow: 1;

    a {
      @include fibMixins.flex_init($inline: true, $ver: true);
    }
  }

  .cmp__older-posts {
    a {
      &:before {
        position: relative;
        content: '≪';
        margin-right: fibFuncs.font_size(-20);
      }

      &:hover:before {
        animation: arrow-move-left fibVars.$medium-speed linear infinite;
      }
    }
  }

  .cmp__newer-posts {
    text-align: right;

    a {
      &:after {
        position: relative;
        content: '≫';
        margin-left: fibFuncs.font_size(-20);
      }

      &:hover:after {
        animation: arrow-move-right fibVars.$medium-speed linear infinite;
      }
    }
  }
}

// Page Footer Component.
.cmp__blog-footer {
  position: relative;
  height: fibVars.$footer-height;
  @include fibMixins.flex_init($column: true);
  padding: fibVars.$xs-size fibVars.$md-size;

  font-family: fibVars.$footer-font-family;
  letter-spacing: fibVars.$large-letter-spacing;
  text-transform: uppercase;

  color: fibVars.$footer-color;

  // https://www.youtube.com/watch?v=CGdEUmO4ZQQ
  &::before {
    display: none;
    position: absolute;
    content: '';
    top: 0;
    left: 0;
    width: 100%;
    height: 12px;
    background: linear-gradient(-135deg, fibVars.$white, 6px, transparent 0%), linear-gradient(135deg, fibVars.$white, 6px, transparent 0%);
    background-size: 12px;
  }

  &::after {
    content: '';
  }

  section {
    &.cmp__footer-left {
      @include fibMixins.flex_init();
      font-size: fibVars.$footer-credits-font-size;

      > div {
        flex-grow: 1;

        &:last-child {
          margin-left: fibFuncs.font_size(-14);
          text-align: right;
        }
      }
    }

    &.cmp__footer-right {
      @include fibMixins.flex_init($center: true);
      margin-top: fibVars.$sm-size;
      font-size: fibVars.$footer-font-size;
    }
  }
}

// Media Queries.
@media only screen and (min-width: fibVars.$mobile) {

  // Navigation.
  .cmp__blog-nav {
    ul {
      li {
        &:not(.cmp__hamburger-link) {
          display: flex;
        }

        &.cmp__hamburger-link {
          display: none;
        }

        a {
          font-size: fibVars.$xs-size;
        }
      }
    }
  }

  // Responsive Article Content.
  blockquote {
    &.cmp__responsive {
      @include fibMixins.set_shadow_radius;
    }
  }

  .cmp__responsive {
    @include fibMixins.set_hor_margin(fibVars.$lg-size);

    &.cmp__toc,
    &.cmp__widget,
    &.cmp__sub {
      @include fibMixins.set_shadow_radius;
    }

    figcaption, caption {
      @include fibMixins.set_hor_margin(0);
    }

    img, .cmp__table-wrapper, pre, .cmp__widget {
      @include fibMixins.set_shadow_radius;
    }
  }
}

@media only screen and (min-width: fibVars.$tablet) {

  // Blog Logo.
  .cmp__blog-info {
    @include fibMixins.flex_update($column: false);

    .cmp__separator {
      display: block;
    }
  }

  // Logo changes.
  a.cmp__blog-logo {
    .cmp__blog-name {
      position: static;
    }
  }

  // Tag line changes.
  .cmp__blog-tag-line {
    font-size: fibVars.$xs-size;
    position: relative;
    left: 0;
    top: 3px;
  }

  // Navigation.
  .cmp__blog-nav {
    ul li .cmp__search-form input {
      display: block;
    }
  }

  // Article Meta Changes.
  .cmp__blog-main {
    --border-radius: #{fibFuncs.font_size(10)};
  }

  // Page title.
  .cmp__page-title {
    h1 {
      &::after {
        height: 6px;
      }
    }
  }

  // Article Meta.
  .cmp__article-meta {
    @include fibMixins.flex_update($column: false);

    > * {
      min-height: 30px;
      margin-bottom: 0;
    }

    > *:not(:last-child):after {
      content: '|';
      @include fibMixins.set_hor_margin(fibVars.$xs-size);
      color: fibVars.$light-gray;
    }
  }

  // Author.
  .cmp__article-author {
    a {
      align-items: center;

      span {
        &.cmp__article-author-role {
          position: static;
        }
      }
    }

    &:after {
      content: '|';
      color: fibVars.$light-gray;
      @include fibMixins.set_hor_margin(fibVars.$xs-size);
    }
  }

  // Subscribe link changes.
  a.cmp__subscribe {
    --ribbon-offset: 6px;
    padding-bottom: fibVars.$lg-size;
    width: fibVars.$xxl-size;
    right: 5%;

    div {
      line-height: 1.2;

      span {
        font-size: fibVars.$md-size;
      }

      span:after {
        border: {
          left: calc(#{fibVars.$xxl-size} / 2) solid fibVars.$rss-ribbon-bg;
          right: calc(#{fibVars.$xxl-size} / 2) solid fibVars.$rss-ribbon-bg;
          bottom: fibVars.$lg-size solid transparent;
        }
      }
    }
  }

  // TOC Ribbon.
  .cmp__ribbon {
    --ribbon-height: #{fibVars.$ribbon-height};
    font-size: fibVars.$small-font-size;
  }

  // Responsive Article Content.
  .cmp__auto-layout > *, .cmp__responsive {
    @include fibMixins.set_hor_margin(fibVars.$xl-size);
  }

  .cmp__responsive-flex {
    @include fibMixins.flex_init($justify: space-between);

    > * {
      flex-grow: 1;
      width: 47%;
      max-width: 47%;
    }
  }

  // Footer.
  .cmp__blog-footer {
    @include fibMixins.flex_update($column: false);

    > section {
      flex-grow: 1;
    }

    section {
      &.cmp__footer-left {
        @include fibMixins.flex_update($column: true);

        > div {
          flex-grow: unset;

          &:last-child {
            margin-left: 0;
            text-align: left;
          }
        }
      }

      &.cmp__footer-right {
        justify-content: flex-end;
        margin-top: 0;
        font-size: fibVars.$footer-font-size;
      }
    }
  }

  // Ribbon.
  .cmp__ribbon-container {
    .cmp__ribbon {
      width: 40%;
    }
  }

  // Go top.
  a.cmp__go-top {
    --border-width: #{fibFuncs.font_size(3)};
  }

  // Color bars.
  .cmp__color-bars {
    --bar-height: #{fibFuncs.font_size(0)};
    --bar-width: #{fibFuncs.font_size(-7)};
    left: fibFuncs.font_size(18);
  }
}

@media only screen and (min-width: fibVars.$breakpoint1) {

  // Responsive Article Content.
  .cmp__auto-layout > *, .cmp__responsive {
    max-width: fibVars.$container-width;
    @include fibMixins.horizontal-center;
  }
}

@media only screen and (min-width: fibVars.$desktop) {

  // Navigation.
  .cmp__blog-nav {
    ul {
      li {
        a {
          .cmp__nav-link-text {
            display: block;
          }
        }
      }
    }
  }

  // Blog content.
  .cmp__blog-main {
    margin: 0 fibVars.$xl-size;
  }

  // Display spiral.
  .cmp__spiral {
    display: block;
  }
}

@media only screen and (min-width: fibVars.$breakpoint2) {
  .cmp__article-author {
    position: absolute;
    top: fibFuncs.font_size(8, true);
    left: fibVars.$article-author-left-offset;

    &:after {
      display: none;
    }

    a {
      flex-direction: column;

      .cmp__article-author-pic {
        width: fibVars.$author-pic-large-screen-width;
      }

      span {
        margin: {
          top: fibFuncs.font_size(-14);
          left: 0;
        };
      }
    }
  }
}

// Animations.
@keyframes arrow-move-left {
  0% {
    left: 0;
  }
  50% {
    left: -3px;
  }
  100% {
    left: 0;
  }
}

@keyframes arrow-move-right {
  0% {
    right: 0;
  }
  50% {
    right: -3px;
  }
  100% {
    right: 0;
  }
}

@keyframes go-top {
  0% {
    top: -6px;
  }
  25% {
    top: -12px;
  }
  75% {
    top: -3px;
  }
  100% {
    top: -6px;
  }
}